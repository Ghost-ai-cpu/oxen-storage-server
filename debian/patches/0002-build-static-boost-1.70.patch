From: Jason Rhinelander <jason@imaginary.ca>
Date: Sat, 16 Jan 2021 00:40:17 -0400
Subject: build static boost 1.74

storage server needs boost 1.66+
---
 CMakeLists.txt            | 8 ++++++++
 httpserver/CMakeLists.txt | 5 -----
 2 files changed, 8 insertions(+), 5 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6f54c3f..264ee35 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -46,6 +46,14 @@ if (INTEGRATION_TEST)
     add_definitions(-DINTEGRATION_TEST)
 endif()
 
+add_library(boost_core INTERFACE)
+target_include_directories(boost_core SYSTEM INTERFACE "${CMAKE_SOURCE_DIR}/boost/include")
+add_library(Boost::boost ALIAS boost_core)
+add_library(Boost::program_options STATIC IMPORTED GLOBAL)
+target_link_libraries(Boost::program_options PUBLIC Boost::boost)
+set_target_properties(Boost::program_options PROPERTIES IMPORTED_LOCATION "${CMAKE_SOURCE_DIR}/boost/lib/libboost_program_options.a")
+target_link_libraries(Boost::system PUBLIC Boost::boost)
+set_target_properties(Boost::system PROPERTIES IMPORTED_LOCATION "${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 if (DISABLE_SNODE_SIGNATURE)
     add_definitions(-DDISABLE_SNODE_SIGNATURE)
diff --git a/httpserver/CMakeLists.txt b/httpserver/CMakeLists.txt
index 0b17497..6916aa1 100644
--- a/httpserver/CMakeLists.txt
+++ b/httpserver/CMakeLists.txt
@@ -23,11 +23,6 @@ add_library(httpserver_lib STATIC
 
 find_package(OpenSSL REQUIRED)
 
-find_package(Boost
-    REQUIRED
-    system
-    program_options
-)
 
 # TODO: enable more warnings!
 target_compile_options(httpserver_lib PRIVATE -Werror=return-type)
