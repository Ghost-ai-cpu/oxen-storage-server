From: Jason Rhinelander <jason@imaginary.ca>
Date: Sat, 16 Jan 2021 00:40:17 -0400
Subject: build static boost

storage server needs boost 1.66+
---
 CMakeLists.txt            | 13 +++++++++++--
 httpserver/CMakeLists.txt |  5 -----
 2 files changed, 11 insertions(+), 7 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6f54c3f..eedb37c 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -46,7 +46,6 @@ if (INTEGRATION_TEST)
     add_definitions(-DINTEGRATION_TEST)
 endif()
 
-
 if (DISABLE_SNODE_SIGNATURE)
     add_definitions(-DDISABLE_SNODE_SIGNATURE)
 endif()
@@ -60,7 +59,17 @@ include_directories(${sodium_INCLUDE_DIR})
 
 include(contrib/check_for_std_filesystem.cmake)
 
-find_package(Boost REQUIRED)
+add_library(boost_core INTERFACE)
+target_include_directories(boost_core SYSTEM INTERFACE "${CMAKE_SOURCE_DIR}/boost/include")
+add_library(Boost::boost ALIAS boost_core)
+add_library(Boost::program_options STATIC IMPORTED GLOBAL)
+set_target_properties(Boost::program_options PROPERTIES
+    IMPORTED_LOCATION "${CMAKE_SOURCE_DIR}/boost/lib/libboost_program_options.a"
+    INTERFACE_INCLUDE_DIRECTORIES "${CMAKE_SOURCE_DIR}/boost/include")
+add_library(Boost::system STATIC IMPORTED GLOBAL)
+set_target_properties(Boost::system PROPERTIES
+    IMPORTED_LOCATION "${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a"
+    INTERFACE_INCLUDE_DIRECTORIES "${CMAKE_SOURCE_DIR}/boost/include")
 
 pkg_check_modules(LOKIMQ REQUIRED IMPORTED_TARGET liblokimq>=1.2)
 add_library(lokimq::lokimq ALIAS PkgConfig::LOKIMQ)
diff --git a/httpserver/CMakeLists.txt b/httpserver/CMakeLists.txt
index 95dbae2..39315a5 100644
--- a/httpserver/CMakeLists.txt
+++ b/httpserver/CMakeLists.txt
@@ -25,11 +25,6 @@ set(JSON_MultipleHeaders ON CACHE BOOL "") # Allows multi-header nlohmann use
 add_subdirectory(../vendors/nlohmann_json nlohmann_json)
 find_package(OpenSSL REQUIRED)
 
-find_package(Boost
-    REQUIRED
-    system
-    program_options
-)
 
 # TODO: enable more warnings!
 target_compile_options(httpserver_lib PRIVATE -Werror=return-type)
